{% extends "base.html" %}

{% block content %}
{% if habits %}
    {% for habit in habits %}
    <div class="habit-card">
        <div class="habit-header">
            <a href="{{ url_for('habit_detail', habit_id=habit.habit_id) }}" class="habit-name">{{ habit.habit_name }}</a>
            <form method="POST" action="{{ url_for('toggle_habit', habit_id=habit.habit_id) }}" style="margin: 0;">
                <input type="checkbox"
                       class="habit-checkbox"
                       {% if habit.completed_today %}checked{% endif %}
                       onchange="this.form.submit()">
            </form>
        </div>

        <div class="habit-body">
            <div class="habit-count-display">
                <span class="count-main">{{ habit.count }}</span>
                <span class="count-suffix">/100</span>
            </div>

            <div class="dot-grid">
                {% for day_completed in habit.history %}
                <div class="dot {% if day_completed %}filled{% endif %}"></div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="empty-state">
        <p>No habits yet!</p>
    </div>
{% endif %}

<a href="{{ url_for('add_habit') }}" class="btn add-habit-btn">Add a Habit</a>
{% endblock %}
